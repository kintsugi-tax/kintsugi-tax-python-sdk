# TaxEstimation
(*tax_estimation*)

## Overview

### Available Operations

* [estimate_tax](#estimate_tax) - Estimate Tax

## estimate_tax

The Estimate Tax API calculates the estimated tax for a specific
    transaction based on the provided details, including organization nexus,
    transaction details, customer details, and addresses. Optionally simulates nexus being met for tax calculation purposes. The `simulate_nexus_met` parameter is deprecated and will be removed in future releases.

### Example Usage

<!-- UsageSnippet language="python" operationID="estimate_tax_v1_tax_estimate_post" method="post" path="/v1/tax/estimate" -->
```python
from kintsugi_tax_platform_sdk import SDK, models
from kintsugi_tax_platform_sdk.utils import parse_datetime


with SDK(
    server_url="https://api.example.com",
) as sdk:

    res = sdk.tax_estimation.estimate_tax(security=models.EstimateTaxV1TaxEstimatePostSecurity(
        api_key_header="<YOUR_API_KEY_HERE>",
    ), x_organization_id="org_12345", date_=parse_datetime("2025-01-23T13:01:29.949Z"), external_id="txn_12345", currency=models.CurrencyEnum.USD, transaction_items=[
        {
            "external_id": "item_A",
            "date_": parse_datetime("2024-10-28T10:00:00Z"),
            "external_product_id": "prod_abc",
            "quantity": 2,
            "amount": 100,
        },
        {
            "external_id": "item_B",
            "date_": parse_datetime("2024-10-28T10:00:00Z"),
            "external_product_id": "prod_xyz",
            "quantity": 1,
            "amount": 75.5,
        },
    ], addresses=[
        {
            "type": models.TransactionEstimatePublicRequestType.SHIP_TO,
            "street_1": "789 Pine St",
            "city": "Austin",
            "state": "TX",
            "postal_code": "78701",
            "country": "US",
        },
    ])

    # Handle response
    print(res)

```

### Parameters

| Parameter                                                                                                                                                                                                                                                                                                 | Type                                                                                                                                                                                                                                                                                                      | Required                                                                                                                                                                                                                                                                                                  | Description                                                                                                                                                                                                                                                                                               | Example                                                                                                                                                                                                                                                                                                   |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `security`                                                                                                                                                                                                                                                                                                | [models.EstimateTaxV1TaxEstimatePostSecurity](../../models/estimatetaxv1taxestimatepostsecurity.md)                                                                                                                                                                                                       | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | N/A                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                           |
| `x_organization_id`                                                                                                                                                                                                                                                                                       | *Nullable[str]*                                                                                                                                                                                                                                                                                           | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | The unique identifier for the organization making the request                                                                                                                                                                                                                                             | org_12345                                                                                                                                                                                                                                                                                                 |
| `date_`                                                                                                                                                                                                                                                                                                   | [date](https://docs.python.org/3/library/datetime.html#date-objects)                                                                                                                                                                                                                                      | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | The date of the transaction in ISO 8601 format (e.g., 2025-01-25T12:00:00Z).                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                           |
| `external_id`                                                                                                                                                                                                                                                                                             | *str*                                                                                                                                                                                                                                                                                                     | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | Unique identifier of this transaction in the source system.                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                           |
| `currency`                                                                                                                                                                                                                                                                                                | [models.CurrencyEnum](../../models/currencyenum.md)                                                                                                                                                                                                                                                       | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | N/A                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                           |
| `transaction_items`                                                                                                                                                                                                                                                                                       | List[[models.TransactionItemEstimateBase](../../models/transactionitemestimatebase.md)]                                                                                                                                                                                                                   | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | List of items involved in the transaction.                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                           |
| `addresses`                                                                                                                                                                                                                                                                                               | List[[models.TransactionEstimatePublicRequestAddress](../../models/transactionestimatepublicrequestaddress.md)]                                                                                                                                                                                           | :heavy_check_mark:                                                                                                                                                                                                                                                                                        | List of addresses related to the transaction. At least one BILL_TO or SHIP_TO address must be provided. The address will be validated during estimation, and the transaction may be rejected if the address does not pass validation. The SHIP_TO will be preferred to use for determining tax liability. |                                                                                                                                                                                                                                                                                                           |
| `simulate_nexus_met`                                                                                                                                                                                                                                                                                      | *Optional[bool]*                                                                                                                                                                                                                                                                                          | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | : warning: ** DEPRECATED **: This will be removed in a future release, please migrate away from it as soon as possible.<br/><br/>**Deprecated:** Use `simulate_active_registration` in the request body instead.                                                                                          |                                                                                                                                                                                                                                                                                                           |
| `total_amount`                                                                                                                                                                                                                                                                                            | [Optional[models.TotalAmountOfTheTransactionAfterDiscounts]](../../models/totalamountofthetransactionafterdiscounts.md)                                                                                                                                                                                   | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | Total amount of the transaction.                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                           |
| `description`                                                                                                                                                                                                                                                                                             | *OptionalNullable[str]*                                                                                                                                                                                                                                                                                   | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | An optional description of the transaction.                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                           |
| `source`                                                                                                                                                                                                                                                                                                  | [OptionalNullable[models.SourceEnum]](../../models/sourceenum.md)                                                                                                                                                                                                                                         | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | : warning: ** DEPRECATED **: This will be removed in a future release, please migrate away from it as soon as possible.<br/><br/>While currently not used, it may be used in the future to determine taxability. The source of the transaction (e.g., OTHER).                                             |                                                                                                                                                                                                                                                                                                           |
| `marketplace`                                                                                                                                                                                                                                                                                             | *OptionalNullable[bool]*                                                                                                                                                                                                                                                                                  | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | Indicates if the transaction involves a marketplace.                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                           |
| `customer`                                                                                                                                                                                                                                                                                                | [OptionalNullable[models.CustomerBasePublic]](../../models/customerbasepublic.md)                                                                                                                                                                                                                         | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | Details about the customer. If the customer is not found, it will be ignored.                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                           |
| `retries`                                                                                                                                                                                                                                                                                                 | [Optional[utils.RetryConfig]](../../models/utils/retryconfig.md)                                                                                                                                                                                                                                          | :heavy_minus_sign:                                                                                                                                                                                                                                                                                        | Configuration to override the default retry behavior of the client.                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                           |

### Response

**[models.PageTransactionEstimateResponse](../../models/pagetransactionestimateresponse.md)**

### Errors

| Error Type                                                     | Status Code                                                    | Content Type                                                   |
| -------------------------------------------------------------- | -------------------------------------------------------------- | -------------------------------------------------------------- |
| errors.ErrorResponse                                           | 401                                                            | application/json                                               |
| errors.BackendSrcTaxEstimationResponsesValidationErrorResponse | 422                                                            | application/json                                               |
| errors.ErrorResponse                                           | 500                                                            | application/json                                               |
| errors.APIError                                                | 4XX, 5XX                                                       | \*/\*                                                          |